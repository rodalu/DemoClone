on:
    pull_request:
  
  env:
    TF_CLOUD_ORGANIZATION: "rodalu"
    TF_API_TOKEN: "${{ secrets.TF_API_TOKEN }}"
    TF_WORKSPACE: "learn-terraform-github-actions"


    jobs:
        terraform:
          if: github.repository != 'hashicorp-education/learn-terraform-github-actions'
          name: "Terraform Plan"
          runs-on: ubuntu-latest
          permissions:
            contents: read
            pull-requests: write
          steps:
## ...
- name: Checkout
  uses: actions/checkout@v3
## ...

        resource "rodalu" "apiops" 
        {
        name        = "apiops2"
        description = "My awesome codebase"

        visibility = "public"

        template {
            owner                = "github"
            repository           = "terraform-template-module"
            include_all_branches = true
        }
        }
        - name: Terraform Plan Status
        if: steps.plan.outcome == 'failure'
        run: exit 1

      - name: Terraform Apply
        if: github.ref == 'refs/heads/main' && github.event_name == 'push'
        run: terraform apply -auto-approve -input=false
